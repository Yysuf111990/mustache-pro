!function(a,b){"object"==typeof exports&&exports?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a.Mustache={},b(a.Mustache))}(this,function(a){function b(a){return"function"==typeof a}function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function d(a,b){return null!=a&&"object"==typeof a&&b in a}function e(a,b){return G.call(a,b)}function f(a){return!e(H,a)}function g(a){return String(a).replace(/[&<>"'\/]/g,function(a){return I[a]})}function h(b,d){function e(){if(q&&!r)for(;p.length;)delete o[p.pop()];else p=[];q=!1,r=!1}function g(a){if("string"==typeof a&&(a=a.split(K,2)),!F(a)||2!==a.length)throw new Error("Invalid tags: "+a);h=new RegExp(c(a[0])+"\\s*"),l=new RegExp("\\s*"+c(a[1])),m=new RegExp("\\s*"+c("}"+a[1]))}if(!b)return[];var h,l,m,n=[],o=[],p=[],q=!1,r=!1;g(d||a.tags);for(var s,t,u,v,w,x,y=new k(b);!y.eos();){if(s=y.pos,u=y.scanUntil(h))for(var z=0,A=u.length;A>z;++z)v=u.charAt(z),f(v)?p.push(o.length):r=!0,o.push(["text",v,s,s+1]),s+=1,"\n"===v&&e();if(!y.scan(h))break;if(q=!0,t=y.scan(N)||"name",y.scan(J),"="===t?(u=y.scanUntil(L),y.scan(L),y.scanUntil(l)):"{"===t?(u=y.scanUntil(m),y.scan(M),y.scanUntil(l),t="&"):u=y.scanUntil(l),!y.scan(l))throw new Error("Unclosed tag at "+y.pos);if(w=[t,u,s,y.pos],o.push(w),"#"===t||"^"===t)n.push(w);else if("/"===t){if(x=n.pop(),!x)throw new Error('Unopened section "'+u+'" at '+s);if(x[1]!==u)throw new Error('Unclosed section "'+x[1]+'" at '+s)}else"name"===t||"{"===t||"&"===t?r=!0:"="===t&&g(u)}if(x=n.pop())throw new Error('Unclosed section "'+x[1]+'" at '+y.pos);return j(i(o))}function i(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function j(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;h>g;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function k(a){this.string=a,this.tail=a,this.pos=0}function l(a,b){this.view=a,this.cache={".":this.view},this.parent=b}function m(){this.cache={}}function n(a){return document.getElementById(a)}function o(a){return a?a.replace(/^\s+|\s+$/g,""):a}function p(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function q(a){if("undefined"!=typeof jQuery)return n("#"+a).text();var b=n(a);if(!b)return"";var c=b.innerText;return c}function r(a,b){for(var c=t(a),d="",e=0;e<c.length;e++)d="if("+c[e]+")",b[d]||(b[d]=x(c[e]));for(var f=s(a),e=0;e<f.length;e++)d=o(f[e]),b[d]||(b[d]=z(f[e]))}function s(a){var b=a.match(Q),c=[];if(b)for(var d=0;d<b.length;d++)c.push(b[d].replace(R,""));return c}function t(a){var b=a.match(S),c=[];if(b)for(var d=0;d<b.length;d++)c.push(b[d].match(T)[1]);return c}function u(a,b){a=a.replace(/===/g,"==");for(var c,d=a.split("||"),e=0;e<d.length;e++)if(c=v(d[e],b))return!0;return!1}function v(a,b){for(var c,d=a.split("&&"),e=0;e<d.length;e++)if(c=w(d[e],b),!c)return!1;return!0}function w(a,b){var c,d=a.indexOf("!=");-1==d?(a=a.split("=="),c="=="):(a=a.split("!="),c="!=");var e=a[0].split("."),f=a[1],g=b;f=f.replace(V,"");for(var h=e.length-1;h>-1;h--){var i=e.slice(h),j=g;try{for(var k=0;k<i.length-1;k++)j=j[i[k]];var l=i[i.length-1];if(l in j){var m=j[l].toString();return"=="==c&&m===f?!0:"!="==c&&m!==f?!0:!1}}catch(n){console.error(n)}}return!1}function x(a){var b=function(){return u(a,this)};return b}function y(a,b){var c=a,b=o(b),d=void 0;if(-1!=b.indexOf("(")){var e=b.match(U);b=e[1],d=o(e[2]),d&&(d=d.split(","))}var f=P.__filters__[b];if(!f)return console.error("[Mustache] Filter:"+b+" is not defined, please use Mustache.registerFilter(filters) to define it."),a;if(void 0!==d){var g=f.apply(this,d||[]);"function"!=typeof g?(console.error("[Mustache] Filter:"+b+" should return a function."),f=X):f=g}return a=f(a),"function"==typeof a&&(console.error("[Mustache] Filter:"+b+" returns a function, use like this: "+b+"(a,b)."),a=c),a}function z(a){a=a.split("|");var b=function(){for(var b=a[0].split("."),c=a.slice(1),d=this,e=b.length-1;e>-1;e--){var f=b.slice(e),g=d;try{for(var h=0;h<f.length-1;h++)g=g[f[h]];var i=o(f[f.length-1]);if(i in g){for(var j=g[i],k=0;k<c.length;k++){var l=y(j,c[k]);void 0!==l?j=l:console.error("[Mustache] Filter: "+c[k]+" no return data when value is "+j+".")}return j}return"-"}catch(m){console.error(m)}}return"-"};return b}function A(a,b){var c,d;for(c in a)d=a[c],d instanceof Array?B(d):"object"==typeof d&&5>b&&A(d,b+1)}function B(a){for(var b=0;b<a.length;b++){var c=a[b];null!==c&&"object"==typeof c&&(0===b?c.__first__=!0:b===a.length-1?c.__last__=!0:c.__middle__=!0,c.__index__=b)}}function C(a,b){var c=P.__renderers;if(c)for(var d in c)for(var e in c[d])!function(){var f=d,g=e,h=c[f][g],i=f+"_"+g;-1==b.indexOf(i)||i in a||(a[i]=function(){return h.call(this,self)})}()}function D(a){return a&&"string"==typeof a?a=a.replace(W,function(a,b,c){return P.subTmpls[b]=c,""}):a}var E=Object.prototype.toString,F=Array.isArray||function(a){return"[object Array]"===E.call(a)},G=RegExp.prototype.test,H=/\S/,I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},J=/\s*/,K=/\s+/,L=/\s*=/,M=/\s*\}/,N=/#|\^|\/|>|\{|&|=|!/;k.prototype.eos=function(){return""===this.tail},k.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c},k.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},l.prototype.push=function(a){return new l(a,this)},l.prototype.lookup=function(a){var c,e=this.cache;if(e.hasOwnProperty(a))c=e[a];else{for(var f,g,h=this,i=!1;h;){if(a.indexOf(".")>0)for(c=h.view,f=a.split("."),g=0;null!=c&&g<f.length;)g===f.length-1&&(i=d(c,f[g])),c=c[f[g++]];else c=h.view[a],i=d(h.view,a);if(i)break;h=h.parent}e[a]=c}return b(c)&&(c=c.call(this.view)),c},m.prototype.clearCache=function(){this.cache={}},m.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=h(a,b)),d},m.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof l?b:new l(b);return this.renderTokens(d,e,c,a)},m.prototype.renderTokens=function(a,b,c,d){for(var e,f,g,h="",i=0,j=a.length;j>i;++i)g=void 0,e=a[i],f=e[0],"#"===f?g=this.renderSection(e,b,c,d):"^"===f?g=this.renderInverted(e,b,c,d):">"===f?g=this.renderPartial(e,b,c,d):"&"===f?g=this.unescapedValue(e,b):"name"===f?g=this.escapedValue(e,b):"text"===f&&(g=this.rawValue(e)),void 0!==g&&(h+=g);return h},m.prototype.renderSection=function(a,c,d,e){function f(a){return g.render(a,c,d)}var g=this,h="",i=c.lookup(a[1]);if(i){if(F(i))for(var j=0,k=i.length;k>j;++j)h+=this.renderTokens(a[4],c.push(i[j]),d,e);else if("object"==typeof i||"string"==typeof i||"number"==typeof i)h+=this.renderTokens(a[4],c.push(i),d,e);else if(b(i)){if("string"!=typeof e)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,e.slice(a[3],a[5]),f),null!=i&&(h+=i)}else h+=this.renderTokens(a[4],c,d,e);return h}},m.prototype.renderInverted=function(a,b,c,d){var e=b.lookup(a[1]);return!e||F(e)&&0===e.length?this.renderTokens(a[4],b,c,d):void 0},m.prototype.renderPartial=function(a,c,d){if(d){var e=b(d)?d(a[1]):d[a[1]];return null!=e?this.renderTokens(this.parse(e),c,d,e):void 0}},m.prototype.unescapedValue=function(a,b){var c=b.lookup(a[1]);return null!=c?c:void 0},m.prototype.escapedValue=function(b,c){var d=c.lookup(b[1]);return null!=d?a.escape(d):void 0},m.prototype.rawValue=function(a){return a[1]},a.name="mustache.js",a.version="2.1.2",a.tags=["{{","}}"];var O=new m;a.clearCache=function(){return O.clearCache()},a.parse=function(a,b){return O.parse(a,b)},a.render=function(a,b,c){return O.render(a,b,c)},a.to_html=function(c,d,e,f){var g=a.render(c,d,e);return b(f)?void f(g):g},a.escape=g,a.Scanner=k,a.Context=l,a.Writer=m;var P=a,Q=/\{{2,3}([^\{]*?)\|(.*?)\}{2,3}/gi,R=/^\{{2,3}|\}{2,3}$/g,S=/\{{2,3}[\^#]?if\((.*?)\)\}{2,3}?/gi,T=/\{{2,3}[\^#]?if\((.*?)\)\}{2,3}?/i,U=/([^(]+)\((.*)\)/,V=/^['"]|["']$/g,W=/\{{2}#sub-tmpl-([^\}]+)\}{2}([\s\S]*?)\{{2}\/sub-tmpl(?:-\1)?\}{2}/gi,X=function(a){return a};P.__filters__={},P.registerFilter=function(a){p(P.__filters__,a)},P.__renderers={},P.registerRenderer=function(a){p(P.__renderers,a)},P.subTmpls={};var Y=P.to_html;P.to_html=function(a,b){return b=b||{},"object"==typeof b&&A(b,0),a=D(a),a=a.replace(/{{#include-(.+)}}/g,function(a,b){var c=P.subTmpls[b];if(c)return c;var d=q(b);return d}),C(b,a),r(a,b),Y.apply(P,arguments)},P.registerFilter({number:function(a){return a=a||2,function(b){return parseFloat(b).toFixed(a)}},percent:function(a){return 100*a+"%"},rmb:function(a){return"ï¿¥"+a},doller:function(a){return"$"+a},thousand:function(a){a+="";var b=/(\d{1,3})(?=(?:\d{3})+\.)/g,c=/(\d{1,3})(?=(?:\d{3})+$)/g,d=-1!=a.indexOf(".")?b:c;return a=a.replace(d,"$1,")}})});